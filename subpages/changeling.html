<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="../css/subpageStyles.css">
        <link rel="stylesheet" href="../css/styles.css">
        <script src="../js/functionality.js"></script>
        <script src="https://kit.fontawesome.com/4001d349c7.js" crossorigin="anonymous"></script>

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Anton&family=Rowdies:wght@300&family=Source+Sans+Pro&display=swap" rel="stylesheet">

        <script src="https://kit.fontawesome.com/4001d349c7.js" crossorigin="anonymous"></script>

        <link rel="icon" type="image/png" href="../media/favicon.png" sizes="32x32" />

        <title>Changeling</title>
    </head>
    <body style="background-image: url('../media/star_map.png');background-size: 150%;background-position: center;">
        <header>
            <div id="title">
                <h1><a href="../index.html">Holly Allen</a></h1>
            </div>
            <div id="navigation">
                <div class="dropdown">
                    <button onclick="dropDown()" class="dropbtn">Projects</button>

                    <div id="dropdownMenu" class="dropdown-content">
                        <a href="../index.html#changeling">Changeling</a>
                        <a href="../index.html#directX-11">DirectX 11</a>
                        <a href="../index.html#game-jam">Game Jams</a>
                        <a href="../index.html#neo-versailles">Neo-Versailles</a>
                    </div>
                </div>
                <div id="contact">
                    <a href="https://www.linkedin.com/in/holly-allen-7a04881b5/" target="_blank" rel="noopener"><i class="fa-brands fa-linkedin fa-2x" style="color: #ebe8f0;"></i></a>
                    &nbsp;&nbsp;&nbsp;<a href="https://github.com/h3allen" target="_blank" rel="noopener"><i class="fa-brands fa-github fa-2x" style="color: #ebe8f0;" ></i></a>
                    &nbsp;&nbsp;&nbsp;<a href="media/Resume.pdf" target="_blank" rel="noopener"><i class="fa-solid fa-file fa-2x" style="color: #ebe8f0;"></i></a>
                </div>


                <!-- <img src="media/crow.png" alt="Crow digital painting"> -->
            </div>
        </header>

        <div id="info" margin-top="">
            <h3>Changeling</h3>
            The <i>Changeling</i> VR Project started in 2020 and every semester has rotated to a different cohort of developers as an entrepreneurial co-op 
            at RIT. I joined the project for Summer 2023, about three years after development on the project. I was brought on as the lead of the new Technical 
            Art team, as there hadn't been enough technical artists prior to the group to warrant a separate group. The task we were told was our top priority on 
            the project was to go through and polish the visuals for an approaching Early Access release, which has since been delayed.
            <br>
            <h4>Optimization</h4>
            The team noticed that while there were levels, VFX, animations, and post-processes present in the project, 
            the game ran at a low fps rate. This meant that the work done by the previous artists and designers couldn't be appreciated, as the game was difficult 
            to play through.
            <i>Changeling</i> sideloads into a number of VR headsets, so the technical specs for each needed to be checked, 
            although we only had a few available to us for testing. The initial fps values we found are in the table below:
            <br><br>
            <table>
                <tr>
                  <th>Level</th>
                  <th>Average</th>
                  <th>Quest 2<br>i7-11700k</th>
                  <th>Rift S<br>Ryzen 2700x</th>
                </tr>
                <tr>
                  <td data-cell="level">Onboarding</td>
                  <td data-cell="average">35 fps</td>
                  <td data-cell="Quest 2, i7-11700k">36 fps</td>
                  <td data-cell="Rift S, Ryzen 2700x">30-40 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Intro Noir</td>
                    <td data-cell="average">38 fps</td>
                    <td data-cell="Quest 2, i7-11700k">36 fps</td>
                    <td data-cell="Rift S, Ryzen 2700x">40 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Mind Palace</td>
                    <td data-cell="average">76 fps</td>
                    <td data-cell="Quest 2, i7-11700k">72 fps</td>
                    <td data-cell="Rift S, Ryzen 2700x">80 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Mother's Level</td>
                    <td data-cell="average">14 fps</td>
                    <td data-cell="Quest 2, i7-11700k">20 fps (lowest 9)</td>
                    <td data-cell="Rift S, Ryzen 2700x">10-20 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Father's Level</td>
                    <td data-cell="average">9 fps</td>
                    <td data-cell="Quest 2, i7-11700k">15 fps (lowest 6.8)</td>
                    <td data-cell="Rift S, Ryzen 2700x">2.5-10 fps</td>
                </tr>
              </table>
              <br>
              Seeing these issues, the team agreed we had one major goal for our time on the project: get each level to run at about 72-80 frames per second 
              consistently. The lowest frame rate we were comfortable allowing to pass was a consistent 60 fps, but our stretch goal was to run the game at 
              the maximum fps most VR headsets can handle at 120.
              <br><br>
              The first tasks divided amongst the team were to check for common pain points in student-made projects that could be affecting the frame rate - 
              real-time lighting, high poly models, and expensive materials and post-processes. The team found all of these.
              <br><br>
              A significant amount of <i>Changeling's</i> assets are from asset stores and online packs made available by other developers. This came with the 
              issue that many of those assets weren't optimized for VR. We'd spend most of the rest of the summer just fixing these problems.
              <br><br>
              By the end of our first month on the project, our frames looked more like this:
              <br><br>
              <table>
                <tr>
                  <th>Level</th>
                  <th>Average</th>
                  <th>Quest 2<br>i7-11700k</th>
                  <th>Rift S<br>Ryzen 2700x</th>
                </tr>
                <tr>
                  <td data-cell="level">Onboarding</td>
                  <td data-cell="average">76 fps</td>
                  <td data-cell="Quest 2, i7-11700k">72 fps</td>
                  <td data-cell="Rift S, Ryzen 2700x">80 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Intro Noir - Street</td>
                    <td data-cell="average">60 fps</td>
                    <td data-cell="Quest 2, i7-11700k">60-72 fps</td>
                    <td data-cell="Rift S, Ryzen 2700x">40 fps (jumps to 80)</td>
                </tr>
                <tr>
                    <td data-cell="level">Intro Noir - Home</td>
                    <td data-cell="average">60 fps</td>
                    <td data-cell="Quest 2, i7-11700k">72 fps</td>
                    <td data-cell="Rift S, Ryzen 2700x">40 fps (jumps to 80)</td>
                </tr>
                <tr>
                    <td data-cell="level">Mind Palace</td>
                    <td data-cell="average">60 fps</td>
                    <td data-cell="Quest 2, i7-11700k">72 fps</td>
                    <td data-cell="Rift S, Ryzen 2700x">80 fps (jumps to 40)</td>
                </tr>
                <tr>
                    <td data-cell="level">Mother's Level</td>
                    <td data-cell="average">43 fps</td>
                    <td data-cell="Quest 2, i7-11700k">18-72 fps</td>
                    <td data-cell="Rift S, Ryzen 2700x">40 fps (jumps to 15-30)</td>
                </tr>
                <tr>
                    <td data-cell="level">Father's Level</td>
                    <td data-cell="average">52 fps</td>
                    <td data-cell="Quest 2, i7-11700k">69-72 fps</td>
                    <td data-cell="Rift S, Ryzen 2700x">25-40 fps (jumps to 80)</td>
                </tr>
              </table>
              <br>
              We'd swapped rendering pipelines at this stage, but we'd inevitably switch them back with little to 
              no problems. It helped us diagnose some larger problems with material and lighting complexity, as 
              well as extremely high-poly models.
              <br><br>

              Our final build for the summer had the following fps values: <br><br>
              <table>
                <tr>
                  <th>Level</th>
                  <th>Average</th>
                  <th>Quest 2<br>i7-9750H</th>
                  <th>PC<br>Ryzen 7 3700X</th>
                  <th>PC<br>Ryzen 7 5700X</th>
                </tr>
                <tr>
                  <td data-cell="level">Onboarding</td>
                  <td data-cell="average">119 fps</td>
                  <td data-cell="Quest 2, i7-9750H">112-120 fps</td>
                  <td data-cell="PC, Ryzen 7 3700X">120 fps</td>
                  <td data-cell="PC, Ryzen 7 5700X">120 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Intro Noir - Apartment</td>
                    <td data-cell="average">120 fps</td>
                    <td data-cell="Quest 2, i7-9750H">120 fps</td>
                    <td data-cell="PC, Ryzen 7 3700X">120 fps</td>
                    <td data-cell="PC, Ryzen 7 5700X">120 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Intro Noir - Street</td>
                    <td data-cell="average">100 fps</td>
                    <td data-cell="Quest 2, i7-9750H">60 fps</td>
                    <td data-cell="PC, Ryzen 7 3700X">120 fps</td>
                    <td data-cell="PC, Ryzen 7 5700X">120 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Intro Noir - Home</td>
                    <td data-cell="average">99 fps</td>
                    <td data-cell="Quest 2, i7-9750H">60 fps</td>
                    <td data-cell="PC, Ryzen 7 3700X">115-120 fps</td>
                    <td data-cell="PC, Ryzen 7 5700X">120 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Mind Palace</td>
                    <td data-cell="average">100 fps</td>
                    <td data-cell="Quest 2, i7-9750H">60-120 fps</td>
                    <td data-cell="PC, Ryzen 7 3700X">70-120 fps</td>
                    <td data-cell="PC, Ryzen 7 5700X">112-120 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Mother's Level</td>
                    <td data-cell="average">76 fps</td>
                    <td data-cell="Quest 2, i7-9750H">30 fps</td>
                    <td data-cell="PC, Ryzen 7 3700X">80-100 fps</td>
                    <td data-cell="PC, Ryzen 7 5700X">100-120 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Father's Level</td>
                    <td data-cell="average"> fps</td>
                    <td data-cell="Quest 2, i7-9750H">60-120 fps</td>
                    <td data-cell="PC, Ryzen 7 3700X">120 fps</td>
                    <td data-cell="PC, Ryzen 7 5700X">105-120 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Douglas's Level</td>
                    <td data-cell="average">112 fps</td>
                    <td data-cell="Quest 2, i7-9750H">80-120 fps</td>
                    <td data-cell="PC, Ryzen 7 3700X">120 fps</td>
                    <td data-cell="PC, Ryzen 7 5700X">116-120 fps</td>
                </tr>
                <tr>
                    <td data-cell="level">Kirsten's Level</td>
                    <td data-cell="average">119 fps</td>
                    <td data-cell="Quest 2, i7-9750H">120 fps</td>
                    <td data-cell="PC, Ryzen 7 3700X">117-120 fps</td>
                    <td data-cell="PC, Ryzen 7 5700X">No Record</td>
                </tr>
              </table>
              <br>
              More work can certainly be done to further improve these values, but considering the team only had about three months to work on it, it was in a good 
              state to onboard the next developers with a few more guidelines on how to keep the project clean. As a bonus, the game was ~1 GB smaller, despite having 
              more scenes!
              <br><br>
              <i>Want to see how the fps values changed over the whole project? More data is <a href="changeling-data.html">here</a>!</i>
              <br>
              <h4>Pipeline</h4>
              As the project's first technical art team, part of our goal was to set a standard for the project moving forward. Ourselves and the other dev teams were 
              struggling to find the assets, blueprints, and documentation we needed for the project. Many of the assets we had were from asset packs previous teams 
              had downloaded, but there wasn't any solid record of them, meaning we didn't know what their licenses were, nor did we have the ability to credit or source 
              them. We also discovered a number of textures with watermarks on them that were clearly meant to be temporary but had no document recording that. This issue 
              ended up being something the Summer 2023 team worked on as a whole.
              <br><br>
              While fixing as many performance problems as we could, the team also set about finding and creating documentation for the parts of the game considered technical 
              art. Most of the development team didn't know what the title meant nor what we would be working on, so we wanted to ensure the right tasks were brought to us 
              and our peers knew what we were working on. We'd gotten more than a few questions in just our first few days as a team, and as we're all students, felt it was 
              best that we explain ourselves.
              <br><br>
              Along with a task board and request channel, the team set to work creating a tech art bible that we and other teams could reference to keep everything 
              consistent and easy to use. The team also set out to reorganize and clean out the project itself, as it had hundreds of unused assets and the file structure 
              had different organizational systems based upon what team had been working on it at the time. 
              <br><br>
              As the tech art lead on the project, a significant amount of my time was spent in meetings with the dev teams. Usually, it was to help them figure out 
              their desired aesthetic along with our aesthetics lead, <a href= "https://thevanamacha.weebly.com/" target="_blank" rel="noopener">Thevanamacha Conde</a>, 
              lighting levels, or assist with any Perforce or Unreal problems that arose. 

              <h4>Lighting</h4>
              Most of the lighting I worked on for <i>Changeling</i> was temporary as levels were in the process of being built. The lighting needed to be kept consistent with 
              their design aspirations, but too many lights, or unoptimized lighting, and the framerate would tank in VR. 
              <br><br>
              The most creative piece of lighting I got to do for <i>Changeling</i> was in the Mind Palace. The goal was that it felt like a theater set, with theater lighting 
              to match. So, I set about looking into theater lighting for dreamscapes and dream-like scenes, something that would make the scene feel safe and unreal. 
              <br><br>
              After a little of my own research, and a conversation with my sister, who studies technical theater, I knew the look and colors that were aimed for in physical theater 
              were soft, almost invisible blue shadows and pink lights. Colors that contrast too much usually end up settling themselves in the real-world or end up looking more 
              like a nightmare, like with red and green lights. 
              <br><br>
              <img src="../media/changeling_light_design.png" alt="Design guide for positive dream-like lighting with a focus on pink and blue lights with soft shadows">
              <br><br>
              I used 2 lights in the scene to mimic the pink and blue look, and a third light yellow light to highlight the important level-islands in the scene. First, I baked a blue 
              light with no shadows, which will act as the shadow color in the scene and covers everything in the level. Next, I used a directional light set to a vibrant pink to light 
              most of the scene and cast a few soft shadows. The light yellow light adds just a slight amount of brightness to the important scenes, helping them stand out from the rest.
              <br><br>
              The biggest issue with the first pass is that while little to no shadows looks pretty good in a theater space, in the void of the Mind Palace, it just looked wrong. Little to 
              no shadows made the world uncomfortable and unfinished. Instead, I ended up positioning the lights so the shadows are longer, still giving that slightly dream-like feel we were 
              going for. Matched with the fireflies and gusts of wind and the Mind Palace felt peaceful enough for a couple playtesters to just sit in it, adding to the shock experienced when 
              the fae invade the player character's safe space.
              <br><br> 
              <img src="../media/changeling_lights.png" alt="Toddler island in Mind Palace covered in grass, a dinosaur toy, and a tree with pink lights and blue shadows">
              <br><br>
         </div>
         <script>
            function AddTableARIA() {
                try {
                    var allTables = document.querySelectorAll('table');
                for (var i = 0; i < allTables.length; i++) {
                    allTables[i].setAttribute('role','table');
                }
                
                var allCaptions = document.querySelectorAll('caption');
                
                for (var i = 0; i < allCaptions.length; i++) {
                    allCaptions[i].setAttribute('role','caption');
                }

                var allRowGroups = document.querySelectorAll('thead, tbody, tfoot');
                
                for (var i = 0; i < allRowGroups.length; i++) {
                    allRowGroups[i].setAttribute('role','rowgroup');
                }

                var allRows = document.querySelectorAll('tr');

                for (var i = 0; i < allRows.length; i++) {
                    allRows[i].setAttribute('role','row');
                }

                var allCells = document.querySelectorAll('td');

                for (var i = 0; i < allCells.length; i++) {
                    allCells[i].setAttribute('role','cell');
                }

                var allHeaders = document.querySelectorAll('th');

                for (var i = 0; i < allHeaders.length; i++) {
                    allHeaders[i].setAttribute('role','columnheader');
                }

                // this accounts for scoped row headers
                var allRowHeaders = document.querySelectorAll('th[scope=row]');

                for (var i = 0; i < allRowHeaders.length; i++) {
                    allRowHeaders[i].setAttribute('role','rowheader');
                }
                } 
                catch (e) {
                    console.log("AddTableARIA(): " + e);
                }
            }

            AddTableARIA();
         </script>
    </body>
</html>